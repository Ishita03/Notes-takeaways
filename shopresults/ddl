CREATE EXTERNAL TABLE `stg_priceent_wrk.digital_shopresults_bkp`( 
   `tcin` string COMMENT 'Uniquely identifiable item number. This helps in joining the item tables to get other attributes like items description,metadata etc. ',  
   `crawl_id` string COMMENT 'Unique id which identifies a crawl',  
   `retailer_short_n` string COMMENT 'Short name of the competitor site from data is crawl',  
   `competitor_product_id` string COMMENT 'Unique identifier for a product being sold at competitor. This would be a uuid which would be common across sources, but different across channels',  
   `crawl_url` string COMMENT 'The URL on which the crawl was done',  
   `shopped_crawl_utc_ts` string COMMENT 'The date-time of the last successful crawl for item on the competitor site',  
   `is_buy_box_winner_f` boolean COMMENT 'Flag which tells whether the item is sold by the competitor itself or not',  
   `is_buy_box_fulfiller_f` boolean COMMENT 'Flag which tells whether the item is shipped/fulfilled by the competitor itself or not',  
   `offer_retail_a` double COMMENT 'This is the offer retail amount of the competitor item fetched/received. This will be different from regular retail if any discounts/sales/clearance programs are happening for the item',  
   `regular_retail_a` double COMMENT 'This is the regular retail amount of the competitor item fetched/received',  
   `competitor_retail_a` double COMMENT 'Derived attribute using coalesce(col(offer_retail_a),col(regular_retail_a))',  
   `currency_c` string COMMENT 'Currency of the price captured',  
   `newton_availability_c` string COMMENT 'Field which provides the buybox availability information of the product on competitor',  
   `promo_message_t` string COMMENT 'Promotion information for item in the buybox on competitor site',  
   `zip_c` string COMMENT 'Postal/zip code of the location',  
   `state_c` string COMMENT 'State of the location ',  
   `city_n` string COMMENT 'City of the location ',  
   `saved_html_link` string COMMENT 'The location of the HTML object when the crawl was done',  
   `competitor_product_title` string COMMENT 'Title of the item on competitor site',  
   `sku` string COMMENT 'SKU of item on competitor',  
   `competitor_isbn10` string COMMENT 'ISBN10 of item on competitor',  
   `competitor_isbn13` string COMMENT 'ISBN13 of item on competitor',  
   `upc` string COMMENT 'UPC of item on competitor',  
   `item_model_number` string COMMENT 'Model Number of item captured on competitor website',  
   `review_count` string COMMENT 'Review count of the item on competitor site',  
   `star_rating` string COMMENT 'Rating of the item on competitor site',  
   `crawled_variant_attribute_n` string COMMENT 'The name of the attribute which specifies it to be a variant on competitor',  
   `crawled_variant_attribute_value` string COMMENT 'The value of the attribute which specifies it to be a variant on competitor',  
   `product_desc` string COMMENT 'Description present for the item on competitor',  
   `seller_id` string COMMENT 'Id of the seller. Its a custom generated id to identify a seller from the list of sellers',  
   `buy_box_winner_n` string COMMENT 'Name of the seller who sells the item on competitor',  
   `buy_box_fulfiller_n` string COMMENT 'Name of the fulfiller who ships the items on competitor when a particular seller is selected for the item on competitor',  
   `buy_box_info_seller_id` string COMMENT 'Id of the buy box seller. Its a custom generated id to identify a seller from the list of sellers',  
   `item_condition_value` string COMMENT 'Represents the condition of the item for a seller',  
   `item_condition_additional_information` string COMMENT 'Any additional information about the condition of the product provided by the seller',  
   `raw_competitor_seller_price_data_arr` array<struct<currency:string,price:string,type:string>> COMMENT 'Price data information with which a seller sells the item on competitor',  
   `seller_item_online_availability` string COMMENT 'The online availability which determines whether the item is in stock with a seller',  
   `seller_item_buyability` string COMMENT 'Represents whether the item is buyable with a seller on competitor',  
   `seller_promo_information` string COMMENT 'Captures any promotional information for a seller on competitor site',  
   `seller_review_count` string COMMENT 'Review count of the seller on competitor site',  
   `seller_start_rating` string COMMENT 'Rating of the seller on competitor site',  
   `is_market_place_f` boolean COMMENT 'Indicates if this item is sourced from a marketplace seller (Target+). Current values: [true, false, null]',  
   `dpci` string COMMENT 'Item Identifier which is a combination of department,class and item ids in ddd-cc-iiii format',  
   `department_id` int COMMENT 'The fourth level in the Merchandise Hierarchy. Department is the primary merchandising classification of Target goods and services. It is used to identify large physical areas in retail stores or buy units by consumer segment. This is the natural/business id for the department',  
   `audit_status_f` boolean COMMENT 'This is the audit status of the competitor information crawled by newton',  
   `shop_validity_f` string COMMENT 'flag to indicate if shop results are valid for price recommendations.',  
   `shop_channel` string COMMENT 'channel type from where competitor shop result is collected. via competitor digital sites or physical stores',  
   `data_provider_c` string COMMENT 'aggregator like rdt, nws, nwe, rde etc',  
   `source_system_n` string COMMENT 'This is the src_sys_name from where competitor information is loaded',  
   `shop_crawl_d` string COMMENT 'Derived from date(shopped_crawl_utc_ts)') 
 PARTITIONED BY (                                   
   `publish_week_end_d` string COMMENT 'accounting week end date based on calendar.greg_d=shop_crawl_d')      
 STORED AS orc
 LOCATION                                           
   'hdfs://bigred3ns/user/SVPRIHDS/hive/external/digital_shopresults_bkp' 